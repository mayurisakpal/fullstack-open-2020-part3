{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","handleSearch","searchTerm","onChange","value","PersonForm","onSubmit","handleNameChange","handleNumberChange","nameValue","numberValue","type","Persons","data","onDeleteButtonClick","handleDeletButtonClick","id","name","length","map","item","toLowerCase","includes","key","number","onClick","bind","baseUrl","axios","get","then","response","post","delete","newData","put","Notification","message","className","defaultProps","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setSearchTerm","notification","setNotification","useEffect","personServices","catch","error","console","warn","emptyIputFields","timer","setTimeout","clearTimeout","duratio","event","target","preventDefault","filter","toLocaleLowerCase","confirmNumberReplace","window","confirm","itemToUpdate","find","updatedItem","updateFornData","concat","addFormData","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.46d9d138.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ handleSearch, searchTerm }) => (\r\n  <div>\r\n    <label>Filter shown with: </label>\r\n    <input onChange={handleSearch} value={searchTerm} />\r\n  </div>\r\n);\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  onSubmit,\r\n  handleNameChange,\r\n  handleNumberChange,\r\n  nameValue,\r\n  numberValue,\r\n}) => (\r\n  <form onSubmit={onSubmit}>\r\n    <div>\r\n      <label>Name: </label>\r\n      <input onChange={handleNameChange} value={nameValue} />\r\n    </div>\r\n    <div>\r\n      <label>Number: </label>\r\n      <input type=\"tel\" onChange={handleNumberChange} value={numberValue} />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">Add</button>\r\n    </div>\r\n  </form>\r\n);\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ data, searchTerm, onDeleteButtonClick }) => {\r\n  const handleDeletButtonClick = (id, name) => {\r\n    if (onDeleteButtonClick) {\r\n      onDeleteButtonClick(id, name);\r\n    }\r\n  };\r\n  return (\r\n    !!data.length &&\r\n    data.map(\r\n      (item) =>\r\n        item.name.toLowerCase().includes(searchTerm.toLowerCase()) && (\r\n          <p key={item.id}>\r\n            {item.name} : {item.number}\r\n            <button\r\n              onClick={handleDeletButtonClick.bind(null, item.id, item.name)}\r\n            >\r\n              Delete\r\n            </button>\r\n          </p>\r\n        )\r\n    )\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl).then((response) => response.data);\r\n};\r\n\r\nconst createData = (data) => {\r\n  return axios.post(baseUrl, data).then((response) => response.data);\r\n};\r\n\r\nconst deleteData = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`).then((response) => response.data);\r\n};\r\n\r\nconst updateData = (id, newData) => {\r\n  return axios\r\n    .put(`${baseUrl}/${id}`, newData)\r\n    .then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  createData,\r\n  deleteData,\r\n  updateData,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Notification = ({ message, type }) => (\r\n  <div\r\n    className={`${\r\n      type === \"unsuccessful\" ? \"notification--error\" : \"notification--success\"\r\n    } notification`}\r\n  >\r\n    {message}\r\n  </div>\r\n);\r\n\r\nNotification.propTypes = {\r\n  type: PropTypes.oneOf([\"successful\", \"unsuccessful\"]),\r\n};\r\n\r\nNotification.defaultProps = {\r\n  type: \"successful\",\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"../src/components/Filter\";\nimport PersonForm from \"../src/components/PersonForm\";\nimport Persons from \"../src/components/Persons\";\nimport personServices from \"../src/services/persons\";\nimport Notification from \"../src/components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [notification, setNotification] = useState({});\n\n  const handleNameChange = (event) => setNewName(event.target.value);\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n\n  // get the data from the server\n  useEffect(() => {\n    personServices\n      .getAll()\n      .then((data) => {\n        setPersons(data);\n      })\n      .catch((error) => console.warn(error));\n  }, []);\n\n  // empty name and number input fileds\n  const emptyIputFields = () => {\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  // add new data to server\n  const addFormData = () => {\n    const newData = {\n      name: newName,\n      number: newNumber,\n    };\n    personServices\n      .createData(newData)\n      .then((data) => {\n        setPersons(persons.concat(data));\n        setNotification({\n          message: `Added ${newData.name}.`,\n        });\n      })\n      .catch((error) => {\n        console.warn(error.response.data.error);\n        setNotification({\n          message: error.response.data.error,\n          type: \"unsuccessful\",\n        });\n      });\n  };\n\n  // replace the old number i.e update existing data in server\n  const updateFornData = () => {\n    const confirmNumberReplace = window.confirm(\n      `${newName} is already added to phonebook, replace the old phonenumber with new one.`\n    );\n    const itemToUpdate = persons.find((item) => item.name === newName);\n    const updatedItem = { ...itemToUpdate, number: newNumber };\n    if (confirmNumberReplace) {\n      personServices\n        .updateData(updatedItem.id, updatedItem)\n        .then((response) => {\n          setPersons(\n            persons.map((item) => (item.id === response.id ? response : item))\n          );\n          setNotification({\n            message: `Replaced ${newName}'s number.`,\n          });\n        })\n        .catch((error) => {\n          console.warn(error);\n          setNotification({\n            message: `Could not replace, as the information on ${newName} has already been removed from the server.`,\n            type: \"unsuccessful\",\n          });\n        });\n    }\n  };\n\n  // hide notification\n  useEffect(() => {\n    if (notification.message) {\n      const timer = setTimeout(() => setNotification({}), 4000);\n      return () => clearTimeout(timer);\n    }\n  }, [notification]);\n\n  // handle data o form submit\n  const handleFormSubmit = (event) => {\n    event.preventDefault();\n    if (!newName || !newNumber) {\n      setNotification({\n        message: \"Please fill both fields.\",\n        type: \"unsuccessful\",\n      });\n      return;\n    }\n    const isNameExist = persons.filter(\n      (item) => item.name.toLocaleLowerCase() === newName.toLowerCase()\n    ).length;\n\n    if (!isNameExist) {\n      addFormData();\n    } else {\n      updateFornData();\n    }\n    emptyIputFields();\n  };\n\n  // set filter search term\n  const handleSearch = (event) => setSearchTerm(event.target.value);\n\n  // delete data from the server\n  const handleDeleteButtonClick = (id, name) => {\n    const confirmDelete = window.confirm(`Delete ${name}?`);\n    if (confirmDelete) {\n      personServices\n        .deleteData(id)\n        .then(() => {\n          setPersons(persons.filter((item) => item.id !== id));\n          setNotification({\n            message: `Deleted ${name}'s contact successfuly.`,\n          });\n        })\n        .catch((error) => {\n          setNotification({\n            message: `The information on ${name} has already been removed from the server.`,\n            type: \"unsuccessful\",\n          });\n          console.warn(error);\n        });\n      emptyIputFields();\n    }\n  };\n\n  return (\n    <>\n      <h1>Phonebook</h1>\n\n      {notification.message && (\n        <Notification\n          message={notification.message}\n          type={notification.type}\n          duratio={3000}\n        />\n      )}\n\n      <Filter searchTerm={searchTerm} handleSearch={handleSearch} />\n\n      <h2>Add a new contact</h2>\n      <PersonForm\n        onSubmit={handleFormSubmit}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        nameValue={newName}\n        numberValue={newNumber}\n      />\n\n      <h2>Numbers</h2>\n      <Persons\n        data={persons}\n        searchTerm={searchTerm}\n        onDeleteButtonClick={handleDeleteButtonClick}\n      />\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}